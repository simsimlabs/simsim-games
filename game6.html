<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê³¼ì¼ í•©ì¹˜ê¸° - ì‹¬ì‹¬í’€ì´ ê²Œì„ ì—°êµ¬ì†Œ</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2261846676525942" crossorigin="anonymous"></script>
    
    <link rel="canonical" href="https://simsimlabs.com/simsim-games/game6.html">

    <meta name="description" content="ê³¼ì¼ í•©ì¹˜ê¸°(Suika Game) ë¬´ë£Œ ì›¹ê²Œì„. ê°™ì€ ê³¼ì¼ì„ í•©ì³ ìˆ˜ë°•ì„ ë§Œë“œì„¸ìš”. ì¤‘ë…ì„± ê°•í•œ ë¨¸ì§€ í¼ì¦ ê²Œì„.">
    
    <meta property="og:type" content="website">
    <meta property="og:title" content="ğŸ‰ ê³¼ì¼ í•©ì¹˜ê¸° - ì‹¬ì‹¬í’€ì´ ê²Œì„ ì—°êµ¬ì†Œ">
    <meta property="og:description" content="ì²´ë¦¬ë¶€í„° ìˆ˜ë°•ê¹Œì§€! ë˜‘ê°™ì€ ê³¼ì¼ì„ í•©ì³ ë” í° ê³¼ì¼ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.">
    <meta property="og:image" content="https://simsimlabs.com/simsim-games/thumbnail.png">
    <meta property="og:url" content="https://simsimlabs.com/simsim-games/game6.html">

    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* 1. ë ˆì´ì•„ì›ƒ & ë°°ê²½ */
        body { 
            margin: 0; padding: 0; 
            background-color: #ffeaa7; 
            font-family: 'Noto Sans KR', sans-serif;
            color: #333;
            overflow-x: hidden; 
            touch-action: none;
        }

        header {
            background: #fdcb6e; color: #2d3436; padding: 15px 20px; text-align: center;
        }

        .header-top {
            display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 10px; font-size: 0.9rem;
        }
        .header-top a { color: #636e72; text-decoration: none; }

        h1 { margin: 0; font-family: 'Jua', sans-serif; font-size: 1.8rem; }

        /* 2. ê´‘ê³  ì˜ì—­ */
        .ad-banner {
            width: 100%; max-width: 1200px; margin: 10px auto;
            text-align: center; background: #fff; padding: 10px 0;
            border-radius: 8px; overflow: hidden;
        }

        /* 3. ê²Œì„ ì»¨í…Œì´ë„ˆ */
        #game-container-box {
            position: relative;
            width: 100%; 
            max-width: 480px; /* PCëŠ” ì ë‹¹í•œ í­ */
            height: 75vh;     
            margin: 0 auto;
            background-color: #fff8e1; 
            border: 4px solid #fdcb6e;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            user-select: none;
        }

        canvas { display: block; width: 100%; height: 100%; cursor: crosshair; }

        /* 4. UI ì˜¤ë²„ë ˆì´ */
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; 
            padding: 15px; box-sizing: border-box;
            display: flex; justify-content: space-between;
            font-family: 'Jua', sans-serif; font-size: 1.2rem; color: #2d3436;
            pointer-events: none;
        }
        
        #game-over-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100; text-align: center;
        }

        #game-over-screen h2 { font-family: 'Jua', sans-serif; font-size: 3rem; color: #e17055; margin: 0 0 10px 0; }
        #restart-btn {
            background: #00b894; color: white; border: none; padding: 15px 40px;
            font-size: 1.5rem; font-family: 'Jua', sans-serif; border-radius: 50px;
            cursor: pointer; box-shadow: 0 5px 0 #008f6d; transition: transform 0.1s;
        }
        #restart-btn:active { transform: translateY(4px); box-shadow: none; }

        /* 5. ì½˜í…ì¸  ì„¤ëª…ê¸€ */
        .content-article {
            max-width: 800px; margin: 40px auto; padding: 20px;
            background: #fff; border-radius: 12px; line-height: 1.8;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .content-article h2 { color: #e17055; border-bottom: 2px solid #f1f2f6; padding-bottom: 10px; }
        .content-article ul { background: #f8f9fa; padding: 20px 40px; border-radius: 8px; }

        /* 6. ê³µìœ  ë²„íŠ¼ */
        .share-bar { text-align: center; margin: 20px 0; }
        .share-btn {
            background: #2d3436; color: white; border: none; padding: 10px 20px;
            border-radius: 30px; cursor: pointer; font-size: 1rem;
            transition: 0.2s;
        }
        .share-btn:hover { transform: translateY(-2px); }
        .share-btn.copy { background: #6c5ce7; }
        
        #toast {
            visibility: hidden; min-width: 250px; margin-left: -125px;
            background-color: #333; color: #fff; text-align: center;
            border-radius: 2px; padding: 16px; position: fixed; z-index: 1000;
            left: 50%; bottom: 30px; font-size: 17px; opacity: 0; transition: 0.5s;
        }
        #toast.show { visibility: visible; opacity: 1; bottom: 50px; }

        footer { text-align: center; padding: 30px; color: #b2bec3; font-size: 0.9rem; }

        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 600px) {
            #game-container-box {
                width: 95%;
                height: 70vh; 
            }
            .content-article { margin: 20px 10px; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-top">
            <a href="en/game6.html">ğŸ‡ºğŸ‡¸ English</a>
            <a href="index.html">ğŸ  ê²Œì„ ëª©ë¡ìœ¼ë¡œ</a>
        </div>
        <h1>ğŸ‰ ê³¼ì¼ í•©ì¹˜ê¸°</h1>
    </header>

    <div class="ad-banner">
        <span style="font-size:10px; color:#ccc;">Sponsored</span>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2261846676525942" data-ad-slot="4380369066" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div id="game-container-box">
        <canvas id="gameCanvas"></canvas>
        
        <div id="ui-layer">
            <div id="score-box">ì ìˆ˜: 0</div>
            <div>ë‹¤ìŒ: <span id="next-fruit">ğŸ’</span></div>
        </div>

        <div id="game-over-screen">
            <h2>ğŸ˜² ë„˜ì³¤ì–´ìš”!</h2>
            <p>ìµœì¢… ì ìˆ˜: <span id="final-score" style="color:#e17055; font-weight:bold; font-size:1.5rem;">0</span></p>
            <button id="restart-btn">ë‹¤ì‹œ ë„ì „ â–¶</button>
        </div>
    </div>

    <div class="ad-banner">
        <span style="font-size:10px; color:#ccc;">Sponsored</span>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2261846676525942" data-ad-slot="4380369066" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div class="share-bar">
        <button class="share-btn copy" onclick="copyLink()"><i class="fa-solid fa-link"></i> ì¹œêµ¬ì™€ ë§í¬ ê³µìœ </button>
    </div>
    <div id="toast">ğŸ“‹ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

    <article class="content-article">
        <h2>ğŸ® ê³¼ì¼ í•©ì¹˜ê¸° (Suika Game) ê°€ì´ë“œ</h2>
        <p>
            ë˜‘ê°™ì€ ê³¼ì¼ ë‘ ê°œë¥¼ ë¶€ë”ªí˜€ ë” í° ê³¼ì¼ë¡œ ì§„í™”ì‹œí‚¤ì„¸ìš”!
            ì²´ë¦¬ì—ì„œ ì‹œì‘í•´ ì‚¬ê³¼, ë³µìˆ­ì•„ë¥¼ ê±°ì³ <strong>ê±°ëŒ€í•œ ìˆ˜ë°•</strong>ì„ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.
            ê³¼ì¼ì´ ìƒì ë°–ìœ¼ë¡œ ë„˜ì¹˜ë©´ ê²Œì„ ì˜¤ë²„ë˜ë‹ˆ ì¡°ì‹¬í•˜ì„¸ìš”.
        </p>

        <h3>ğŸ•¹ï¸ ì¡°ì‘ ë°©ë²•</h3>
        <ul>
            <li><strong>PC:</strong> ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ ìœ„ì¹˜ë¥¼ ì •í•˜ê³ , í´ë¦­í•´ì„œ ë–¨ì–´ëœ¨ë¦½ë‹ˆë‹¤.</li>
            <li><strong>ëª¨ë°”ì¼:</strong> í™”ë©´ì„ í„°ì¹˜í•˜ê³  ë“œë˜ê·¸í•˜ì—¬ ìœ„ì¹˜ë¥¼ ì •í•œ ë’¤, ì†ì„ ë–¼ë©´ ë–¨ì–´ì§‘ë‹ˆë‹¤.</li>
        </ul>

        <h3>ğŸ† ê¿€íŒ</h3>
        <p>
            1. <strong>í° ê³¼ì¼ì€ êµ¬ì„ìœ¼ë¡œ:</strong> ê°€ì¥ í° ê³¼ì¼ì„ í•œìª½ êµ¬ì„ì— ëª°ì•„ë‘ë©´ ì—°ì‡„ í•©ì¹˜ê¸°ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤.<br>
            2. <strong>ìˆœì„œëŒ€ë¡œ ìŒ“ê¸°:</strong> í° ê³¼ì¼ ì˜†ì— ê·¸ ë‹¤ìŒìœ¼ë¡œ í° ê³¼ì¼ì„ ë°°ì¹˜í•˜ëŠ” 'ê³„ë‹¨ì‹ ìŒ“ê¸°'ë¥¼ í™œìš©í•˜ì„¸ìš”.<br>
            3. <strong>ì‘ì€ ê³¼ì¼ ì²˜ë¦¬:</strong> ì‘ì€ ê³¼ì¼ë“¤ì´ í‹ˆìƒˆì— ë¼ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.
        </p>
    </article>

    <footer>
        <p>Â© 2024 SimSim Game Labs. All rights reserved.</p>
        <a href="https://simsimlabs.com/privacy.html" style="color:#b2bec3; text-decoration:none;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    </footer>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('game-container-box');
        const scoreEl = document.getElementById('score-box');
        const nextFruitEl = document.getElementById('next-fruit');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreEl = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');

        // ê³¼ì¼ ë°ì´í„°
        const FRUITS = [
            { r: 16, color: '#ff7675', name: 'ğŸ’' }, 
            { r: 24, color: '#fd79a8', name: 'ğŸ“' }, 
            { r: 32, color: '#6c5ce7', name: 'ğŸ‡' }, 
            { r: 40, color: '#fab1a0', name: 'ğŸŠ' }, 
            { r: 50, color: '#e17055', name: 'ğŸ' }, 
            { r: 62, color: '#ffeaa7', name: 'ğŸ' }, 
            { r: 76, color: '#fdcb6e', name: 'ğŸ‘' }, 
            { r: 92, color: '#00b894', name: 'ğŸ' }, 
            { r: 110, color: '#81ecec', name: 'ğŸˆ' }, 
            { r: 130, color: '#2d3436', name: 'ğŸ‰' }  
        ];

        let balls = [];
        let particles = [];
        let score = 0;
        let gameOver = false;
        let nextFruitIdx = 0;
        let dropping = false;
        let mouseX = 0;
        let animationFrameId;

        // ì´ˆê¸°í™”
        function init() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // ì…ë ¥ ì´ë²¤íŠ¸
            container.addEventListener('mousemove', e => {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                mouseX = (e.clientX - rect.left) * scaleX;
            });
            container.addEventListener('touchmove', e => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                mouseX = (e.touches[0].clientX - rect.left) * scaleX;
            }, {passive: false});

            // í´ë¦­/í„°ì¹˜ ì‹œ ë–¨ì–´ëœ¨ë¦¬ê¸°
            const handleDrop = (e) => {
                if(e.type === 'touchstart') e.preventDefault();
                if(gameOver || dropping) return;
                
                dropping = true;
                // í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì— ìƒì„± (ë²½ ëš«ê¸° ë°©ì§€)
                let r = FRUITS[nextFruitIdx].r;
                let dropX = Math.max(r, Math.min(canvas.width - r, mouseX));
                
                addBall(dropX, 50, nextFruitIdx);

                nextFruitIdx = Math.floor(Math.random() * 4); // 0~3 ë‹¨ê³„ë§Œ ë‚˜ì˜´
                updateNextFruit();

                setTimeout(() => { dropping = false; }, 500); // ë”œë ˆì´
            };

            container.addEventListener('mousedown', handleDrop);
            container.addEventListener('touchend', handleDrop);
            restartBtn.addEventListener('click', resetGame);

            resetGame();
        }

        function resizeCanvas() {
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }

        function resetGame() {
            if(animationFrameId) cancelAnimationFrame(animationFrameId);
            balls = [];
            particles = [];
            score = 0;
            gameOver = false;
            gameOverScreen.style.display = 'none';
            scoreEl.innerText = "ì ìˆ˜: 0";
            nextFruitIdx = 0;
            updateNextFruit();
            mouseX = canvas.width / 2;
            dropping = false;
            loop();
        }

        function updateNextFruit() {
            nextFruitEl.innerText = FRUITS[nextFruitIdx].name;
        }

        function addBall(x, y, level) {
            balls.push({
                x: x, y: y,
                vx: 0, vy: 0,
                level: level,
                r: FRUITS[level].r,
                mass: FRUITS[level].r, // ì§ˆëŸ‰ì€ í¬ê¸°ì— ë¹„ë¡€
                angle: 0,
                merged: false
            });
        }

        function createParticles(x, y, color) {
            for(let i=0; i<8; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random()-0.5)*5, vy: (Math.random()-0.5)*5,
                    life: 20 + Math.random()*10, 
                    color: color, r: Math.random()*4 + 2
                });
            }
        }

        function loop() {
            if(gameOver) return;

            // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸ (Sub-stepping: ì¶©ëŒ ì •ë°€ë„ í–¥ìƒ)
            const SUB_STEPS = 8; 
            for(let s=0; s<SUB_STEPS; s++) {
                balls.forEach(b => {
                    b.vy += 0.3 / SUB_STEPS; // ì¤‘ë ¥
                    b.x += b.vx / SUB_STEPS; 
                    b.y += b.vy / SUB_STEPS;
                    
                    // ë²½ ì¶©ëŒ
                    if(b.x < b.r) { b.x = b.r; b.vx *= -0.3; }
                    if(b.x > canvas.width - b.r) { b.x = canvas.width - b.r; b.vx *= -0.3; }
                    if(b.y > canvas.height - b.r) { b.y = canvas.height - b.r; b.vy *= -0.3; b.vx *= 0.95; } // ë°”ë‹¥ ë§ˆì°°
                });

                // ê³µë¼ë¦¬ ì¶©ëŒ (O(N^2))
                for(let i=0; i<balls.length; i++) {
                    for(let j=i+1; j<balls.length; j++) {
                        let b1 = balls[i];
                        let b2 = balls[j];
                        if(b1.merged || b2.merged) continue;

                        let dx = b2.x - b1.x;
                        let dy = b2.y - b1.y;
                        let distSq = dx*dx + dy*dy;
                        let radSum = b1.r + b2.r;

                        if(distSq < radSum * radSum) {
                            let dist = Math.sqrt(distSq);
                            if(dist === 0) dist = 0.1; // 0 ë‚˜ëˆ„ê¸° ë°©ì§€

                            // í•©ì¹˜ê¸° ë¡œì§
                            if(b1.level === b2.level && b1.level < FRUITS.length-1) {
                                b1.merged = true; b2.merged = true;
                                let newX = (b1.x + b2.x) / 2;
                                let newY = (b1.y + b2.y) / 2;
                                addBall(newX, newY, b1.level + 1);
                                createParticles(newX, newY, FRUITS[b1.level].color);
                                score += (b1.level + 1) * 10;
                                scoreEl.innerText = `ì ìˆ˜: ${score}`;
                                continue; // í•©ì³ì¡Œìœ¼ë©´ ë¬¼ë¦¬ ê³„ì‚° ê±´ë„ˆëœ€
                            }

                            // ë°€ì–´ë‚´ê¸° (ìœ„ì¹˜ ë³´ì •)
                            let overlap = radSum - dist;
                            let nx = dx / dist;
                            let ny = dy / dist;
                            
                            // ì§ˆëŸ‰ì— ë”°ë¼ ë°€ë¦¬ëŠ” ì •ë„ ë‹¤ë¥´ê²Œ
                            let totalMass = b1.mass + b2.mass;
                            let m1 = b2.mass / totalMass;
                            let m2 = b1.mass / totalMass;

                            b1.x -= nx * overlap * m1;
                            b1.y -= ny * overlap * m1;
                            b2.x += nx * overlap * m2;
                            b2.y += ny * overlap * m2;

                            // ì¶©ëŒ ë°˜ì‘ (ì†ë„ êµí™˜ + ë°˜ë°œ)
                            let rvx = b2.vx - b1.vx;
                            let rvy = b2.vy - b1.vy;
                            let velAlongNormal = rvx * nx + rvy * ny;

                            if(velAlongNormal > 0) continue; // ì´ë¯¸ ë©€ì–´ì§€ê³  ìˆìŒ

                            let restitution = 0.2; // ë°˜ë°œ ê³„ìˆ˜ (ë‚®ê²Œ ì„¤ì •í•˜ì—¬ ëœ íŠ€ê²Œ)
                            let jImpulse = -(1 + restitution) * velAlongNormal;
                            jImpulse /= (1/b1.mass + 1/b2.mass);
                            
                            let impulseX = jImpulse * nx;
                            let impulseY = jImpulse * ny;

                            b1.vx -= impulseX / b1.mass;
                            b1.vy -= impulseY / b1.mass;
                            b2.vx += impulseX / b2.mass;
                            b2.vy += impulseY / b2.mass;
                            
                            // íšŒì „ íš¨ê³¼ (ë‹¨ìˆœí™”)
                            b1.angle += b1.vx * 0.01;
                            b2.angle += b2.vx * 0.01;
                        }
                    }
                }
            }

            // í•©ì³ì§„ ê³µ ì œê±°
            balls = balls.filter(b => !b.merged);

            // ê·¸ë¦¬ê¸°
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ê°€ì´ë“œë¼ì¸
            if(!dropping) {
                let r = FRUITS[nextFruitIdx].r;
                let dropX = Math.max(r, Math.min(canvas.width - r, mouseX));
                
                ctx.beginPath();
                ctx.moveTo(dropX, 20); ctx.lineTo(dropX, canvas.height);
                ctx.strokeStyle = 'rgba(0,0,0,0.1)'; ctx.lineWidth = 2; ctx.stroke();

                ctx.globalAlpha = 0.5;
                ctx.font = `${r * 2}px sans-serif`;
                ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
                ctx.fillText(FRUITS[nextFruitIdx].name, dropX, 50);
                ctx.globalAlpha = 1.0;
            }

            // ë°ë“œë¼ì¸ ì ì„ 
            ctx.beginPath();
            ctx.moveTo(0, 100); ctx.lineTo(canvas.width, 100);
            ctx.strokeStyle = '#e17055'; ctx.lineWidth = 2; ctx.setLineDash([5, 5]); ctx.stroke(); ctx.setLineDash([]);

            // ê³¼ì¼ ê·¸ë¦¬ê¸°
            balls.forEach(b => {
                ctx.save();
                ctx.translate(b.x, b.y);
                ctx.rotate(b.angle);
                
                // ì›í˜• (ë””ë²„ê·¸ìš© or ê¹”ë”í•œ ë°°ê²½)
                ctx.beginPath(); ctx.arc(0, 0, b.r, 0, Math.PI*2);
                ctx.fillStyle = FRUITS[b.level].color; 
                ctx.shadowBlur = 5; ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.fill(); ctx.shadowBlur = 0;
                
                // ì´ëª¨ì§€
                ctx.font = `${b.r * 1.6}px sans-serif`;
                ctx.fillStyle = 'white'; 
                ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
                // yì¶• ì•½ê°„ ë³´ì •
                ctx.fillText(FRUITS[b.level].name, 0, b.r * 0.1); 

                ctx.restore();
            });

            // íŒŒí‹°í´
            for(let i=particles.length-1; i>=0; i--) {
                let p = particles[i];
                p.x += p.vx; p.y += p.vy; p.life--;
                if(p.life <= 0) { particles.splice(i,1); continue; }
                
                ctx.globalAlpha = p.life / 30;
                ctx.fillStyle = p.color;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
                ctx.globalAlpha = 1.0;
            }

            // ê²Œì„ ì˜¤ë²„ ì²´í¬ (ë†’ì´ 100px ìœ„ë¡œ ì˜¬ë¼ì˜¤ë©´)
            // ì•ˆì •ì„ ìœ„í•´ ì†ë„ê°€ ê±°ì˜ ì—†ì„ ë•Œë§Œ ì²´í¬
            for(let b of balls) {
                if(b.y - b.r < 100 && Math.abs(b.vy) < 0.1 && Math.abs(b.vx) < 0.1 && !dropping) {
                    gameOver = true;
                    finalScoreEl.innerText = score;
                    gameOverScreen.style.display = 'flex';
                    break;
                }
            }

            animationFrameId = requestAnimationFrame(loop);
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const toast = document.getElementById("toast");
                toast.className = "show";
                setTimeout(() => toast.className = toast.className.replace("show", ""), 3000);
            });
        }

        init();
    </script>
</body>
</html>

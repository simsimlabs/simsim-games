<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cell Eaters - SimSim Game Labs</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2261846676525942" crossorigin="anonymous"></script>
    
    <link rel="canonical" href="https://simsimlabs.com/simsim-games/en/game1.html">

    <meta name="description" content="Play Cell Eaters for free! Eat smaller cells to grow massive and survive. No installation required. Optimized for PC and Mobile.">
    
    <meta property="og:type" content="website">
    <meta property="og:title" content="ü¶† Cell Eaters - SimSim Game Labs">
    <meta property="og:description" content="Eat smaller cells to grow! The ultimate survival IO game. Play now for free.">
    <meta property="og:image" content="https://simsimlabs.com/simsim-games/en/thumbnail.png">
    <meta property="og:url" content="https://simsimlabs.com/simsim-games/en/game1.html">

    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* 1. Basic Layout */
        body { 
            margin: 0; padding: 0; 
            background-color: #f0f2f5; 
            font-family: 'Noto Sans KR', sans-serif;
            color: #333;
            overflow-x: hidden; 
        }

        header {
            background: #2d3436; color: white; padding: 15px 20px; text-align: center;
        }

        .header-top {
            display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 10px; font-size: 0.9rem;
        }
        .header-top a { color: #dfe6e9; text-decoration: none; }

        h1 { margin: 0; font-family: 'Jua', sans-serif; font-size: 1.8rem; }

        /* 2. Ad Banner */
        .ad-banner {
            width: 100%; max-width: 1200px; margin: 20px auto;
            text-align: center; background: #fff; padding: 10px 0;
            border-radius: 8px; overflow: hidden;
        }

        /* 3. Game Container */
        #game-container-box {
            position: relative;
            width: 100%; 
            max-width: 1280px; 
            height: 720px;     
            margin: 0 auto;
            background-color: #000; border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }

        canvas { display: block; width: 100%; height: 100%; cursor: crosshair; }

        /* 4. UI Layer */
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100; color: white; text-align: center;
        }

        #ui-layer h2 { font-family: 'Jua', sans-serif; font-size: 3.5rem; color: #6c5ce7; margin-bottom: 10px; text-shadow: 3px 3px 0 #fff; }
        #ui-layer p { font-size: 1.2rem; color: #dfe6e9; margin-bottom: 30px; line-height: 1.6; }
        
        #start-btn {
            background: #ff7675; color: white; border: none; padding: 15px 60px;
            font-size: 1.8rem; font-family: 'Jua', sans-serif; border-radius: 50px;
            cursor: pointer; box-shadow: 0 5px 0 #d63031; transition: transform 0.1s;
        }
        #start-btn:active { transform: translateY(4px); box-shadow: none; }
        #start-btn:hover { background: #ff6b6b; }

        /* 5. In-Game HUD */
        #leaderboard {
            position: absolute; top: 15px; right: 15px;
            background: rgba(0,0,0,0.5); color: white; padding: 15px;
            border-radius: 8px; font-family: 'Jua', sans-serif; font-size: 1rem;
            min-width: 160px; pointer-events: none; z-index: 50;
        }
        #rank-list { list-style: none; padding: 0; margin: 0; }
        #rank-list li { margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.2); }

        #kill-log {
            position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%);
            background: rgba(214, 48, 49, 0.9); color: white;
            padding: 10px 30px; border-radius: 30px; font-weight: bold;
            opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 50;
            white-space: nowrap; font-size: 1.1rem;
        }

        /* 6. Mobile Joystick */
        #joystick-zone {
            position: absolute; bottom: 30px; left: 30px; width: 140px; height: 140px;
            z-index: 90; display: none; 
        }
        #joystick-bg {
            width: 100%; height: 100%; background: rgba(255, 255, 255, 0.15);
            border-radius: 50%; position: relative; border: 2px solid rgba(255,255,255,0.3);
        }
        #joystick-stick {
            width: 60px; height: 60px; background: rgba(255, 255, 255, 0.8);
            border-radius: 50%; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }

        /* 7. Content Article */
        .content-article {
            max-width: 1200px; margin: 40px auto; padding: 40px;
            background: #fff; border-radius: 12px; line-height: 1.8;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .content-article h2 { color: #ff7675; border-bottom: 2px solid #f1f2f6; padding-bottom: 10px; margin-top: 30px; }
        .content-article h3 { color: #74b9ff; margin-top: 25px; }
        .content-article ul { background: #f8f9fa; padding: 20px 40px; border-radius: 8px; }

        /* 8. Share & Toast */
        .share-bar { text-align: center; margin: 30px 0; }
        .share-btn {
            background: #333; color: white; border: none; padding: 12px 25px;
            border-radius: 30px; cursor: pointer; font-size: 1rem; margin: 0 5px;
            transition: 0.2s;
        }
        .share-btn:hover { transform: translateY(-2px); }
        .share-btn.copy { background: #6c5ce7; }
        
        #toast {
            visibility: hidden; min-width: 250px; margin-left: -125px;
            background-color: #333; color: #fff; text-align: center;
            border-radius: 2px; padding: 16px; position: fixed; z-index: 1000;
            left: 50%; bottom: 30px; font-size: 17px; opacity: 0; transition: 0.5s;
        }
        #toast.show { visibility: visible; opacity: 1; bottom: 50px; }

        footer { text-align: center; padding: 30px; color: #b2bec3; font-size: 0.9rem; }

        /* Mobile Optimization */
        @media (max-width: 800px) {
            #game-container-box {
                width: 100%;
                height: 90vh; 
                border-radius: 0;
            }
            #ui-layer h2 { font-size: 2.2rem; }
            .content-article { margin: 20px 10px; padding: 20px; }
            h1 { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-top">
            <a href="../game1.html">üá∞üá∑ Korean</a>
            <a href="index.html">üè† Back to List</a>
        </div>
        <h1>ü¶† Cell Eaters</h1>
    </header>

    <div class="ad-banner">
        <span style="font-size:10px; color:#ccc;">Sponsored</span>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2261846676525942"
             data-ad-slot="4380369066"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div id="game-container-box">
        <canvas id="gameCanvas"></canvas>

        <div id="leaderboard">
            <h3>üèÜ TOP 5</h3>
            <ul id="rank-list"><li>Loading...</li></ul>
        </div>

        <div id="kill-log"></div>

        <div id="joystick-zone">
            <div id="joystick-bg">
                <div id="joystick-stick"></div>
            </div>
        </div>

        <div id="ui-layer">
            <h2 id="ui-title">Cell Eaters</h2>
            <p id="ui-desc">
                Move to eat food and grow.<br>
                Avoid cells bigger than you!
            </p>
            <button id="start-btn">Play Now ‚ñ∂</button>
        </div>
    </div>

    <div class="ad-banner">
        <span style="font-size:10px; color:#ccc;">Sponsored</span>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2261846676525942"
             data-ad-slot="4380369066"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="share-bar">
        <button class="share-btn copy" onclick="copyLink()"><i class="fa-solid fa-link"></i> Copy Link</button>
    </div>
    <div id="toast">üìã Link Copied!</div>

    <article class="content-article">
        <h2>üéÆ Cell Eaters Strategy Guide</h2>
        <p>
            Cell Eaters is a popular <strong>real-time survival IO game</strong> inspired by 'Agar.io'.
            You start as a single microscopic cell. Your objective is to move around the map, eat small food dots, and consume smaller players to grow larger.
            Play instantly on your browser without installation. Simple rules, but deep strategy required!
        </p>

        <h3>üïπÔ∏è Controls</h3>
        <ul>
            <li><strong>PC:</strong> The cell follows your mouse cursor.</li>
            <li><strong>Mobile:</strong> Use the virtual joystick on the bottom left to move.</li>
            <li><strong>Rules:</strong> Eat smaller cells to grow. Run away from bigger cells.</li>
        </ul>

        <h3>üèÜ Pro Tips for Winning</h3>
        <p>
            1. <strong>Survival First:</strong> Don't be aggressive early on. Focus on eating the small dots to reach size 100 safely.<br><br>
            2. <strong>Use Corners:</strong> The edges of the map can be dangerous, but they also protect your back. Use them to limit the angles from which enemies can attack.<br><br>
            3. <strong>Don't Chase:</strong> It's hard to catch enemies that are only slightly smaller than you because they move at the same speed. Target unsuspecting or much smaller cells.
        </p>
    </article>

    <footer>
        <p>¬© 2024 SimSim Game Labs. All rights reserved.</p>
        <a href="https://simsimlabs.com/en/privacy.html" style="color:#b2bec3; text-decoration:none;">Privacy Policy</a>
    </footer>

    <script>
        // DOM Elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('game-container-box');
        
        const uiLayer = document.getElementById('ui-layer');
        const uiTitle = document.getElementById('ui-title');
        const uiDesc = document.getElementById('ui-desc');
        const startBtn = document.getElementById('start-btn');
        
        const rankList = document.getElementById('rank-list');
        const killLog = document.getElementById('kill-log');
        
        const joystickZone = document.getElementById('joystick-zone');
        const joystickStick = document.getElementById('joystick-stick');

        // Game Constants
        const MAP_SIZE = 4000; 
        const BOT_COUNT = 60;
        const FOOD_COUNT = 1500;

        let player = { x: 0, y: 0, r: 0, color: '', name: '' };
        let foods = [];
        let bots = [];
        let gameRunning = false;
        let animationFrameId;

        // Input
        let inputType = 'mouse';
        let mouseX = 0, mouseY = 0;
        let joystickVector = { x: 0, y: 0 };

        // Bot Names (English)
        const adjectives = ["Hungry", "Sleepy", "Happy", "Angry", "Fast", "Slow", "Strong", "Cute", "Scary", "Bored", "Brave", "Crazy", "Hidden", "Legendary", "Lazy", "Clean", "Giant", "Suspicious", "Genius", "Stupid"];
        const nouns = ["Human", "Cat", "Dog", "Dev", "Student", "Worker", "Worm", "Cell", "Tiger", "Lion", "Rabbit", "Bear", "Chicken", "Pizza", "Burger", "Gamer", "Dino", "Slime", "Alien", "Hero", "Robot"];

        function generateBotName() {
            return adjectives[Math.floor(Math.random() * adjectives.length)] + " " + nouns[Math.floor(Math.random() * nouns.length)];
        }

        // Init
        function init() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Mobile Check
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                joystickZone.style.display = 'block';
                inputType = 'joystick';
            }

            // Mouse Events
            container.addEventListener('mousemove', e => {
                if(inputType !== 'joystick') {
                    const rect = canvas.getBoundingClientRect();
                    const scaleX = canvas.width / rect.width;
                    const scaleY = canvas.height / rect.height;
                    mouseX = (e.clientX - rect.left) * scaleX;
                    mouseY = (e.clientY - rect.top) * scaleY;
                }
            });

            container.addEventListener('mousedown', () => { 
                if(!('ontouchstart' in window)) inputType = 'mouse'; 
            });

            startBtn.addEventListener('click', startGame);
            initJoystick();
        }

        function resizeCanvas() {
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }

        function startGame() {
            uiLayer.style.display = 'none';
            gameRunning = true;
            
            player = { x: MAP_SIZE/2, y: MAP_SIZE/2, r: 30, color: '#6c5ce7', name: 'Me (Player)' };
            foods = [];
            bots = [];
            
            for(let i=0; i<FOOD_COUNT; i++) addFood();
            for(let i=0; i<BOT_COUNT; i++) addBot();
            
            mouseX = canvas.width / 2;
            mouseY = canvas.height / 2;
            joystickVector = { x: 0, y: 0 };

            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            loop();
        }

        function addFood() {
            foods.push({
                x: Math.random() * MAP_SIZE,
                y: Math.random() * MAP_SIZE,
                r: Math.random() * 5 + 3,
                color: `hsl(${Math.random()*360}, 80%, 70%)`
            });
        }

        // Add Bot with 3 Personalities
        function addBot() {
            let bX, bY, dist;
            let safeDistance = 800; 
            let attempts = 0;
            do {
                bX = Math.random() * MAP_SIZE;
                bY = Math.random() * MAP_SIZE;
                if (player) dist = Math.hypot(bX - player.x, bY - player.y);
                else dist = safeDistance + 1;
                attempts++;
            } while (dist < safeDistance && attempts < 100);

            const types = ['aggressive', 'balanced', 'defensive'];
            const randType = types[Math.floor(Math.random() * types.length)];

            bots.push({
                x: bX, y: bY,
                r: Math.random() * 40 + 20,
                color: `hsl(${Math.random()*360}, 60%, 50%)`,
                name: generateBotName(),
                type: randType,
                state: 'wander',
                target: null,
                changeDirTimer: 0,
                angle: Math.random() * Math.PI * 2
            });
        }

        function initJoystick() {
            let stick = joystickStick;
            let zone = joystickZone;
            let maxDist = 35; 
            let active = false;
            
            const handleStart = (clientX, clientY) => {
                active = true; inputType = 'joystick';
                const rect = zone.getBoundingClientRect();
                updateStick(clientX, clientY, rect.left + rect.width/2, rect.top + rect.height/2);
            };

            const handleMove = (clientX, clientY) => {
                if(!active) return;
                const rect = zone.getBoundingClientRect();
                updateStick(clientX, clientY, rect.left + rect.width/2, rect.top + rect.height/2);
            };

            const handleEnd = () => {
                active = false;
                stick.style.transform = `translate(-50%, -50%)`;
                joystickVector = { x: 0, y: 0 };
            };

            zone.addEventListener('touchstart', e => { e.preventDefault(); handleStart(e.touches[0].clientX, e.touches[0].clientY); }, {passive: false});
            zone.addEventListener('touchmove', e => { e.preventDefault(); handleMove(e.touches[0].clientX, e.touches[0].clientY); }, {passive: false});
            zone.addEventListener('touchend', e => { e.preventDefault(); handleEnd(); });

            function updateStick(clientX, clientY, centerX, centerY) {
                let dx = clientX - centerX;
                let dy = clientY - centerY;
                let dist = Math.sqrt(dx*dx + dy*dy);
                if(dist > maxDist) {
                    dx = (dx / dist) * maxDist;
                    dy = (dy / dist) * maxDist;
                }
                stick.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px))`;
                joystickVector = { x: dx / maxDist, y: dy / maxDist };
            }
        }

        // Smart Bot AI (3 Types + Anti-Clustering)
        function updateBotAI(b) {
            b.changeDirTimer--;

            let viewMult = 1;   
            let bravery = 1.1;  
            let greed = 0.9;    

            if (b.type === 'aggressive') { 
                viewMult = 1.5; bravery = 1.25; greed = 0.99;   
            } else if (b.type === 'defensive') { 
                viewMult = 1.1; bravery = 1.01; greed = 0.70;   
            } else { 
                viewMult = 1.2; bravery = 1.15; greed = 0.90;
            }

            const viewRange = (600 + b.r * 2) * viewMult;
            
            let closestThreat = null;
            let closestPrey = null;
            let minDistThreat = Infinity;
            let minDistPrey = Infinity;

            const checkTarget = (target) => {
                if (target === b) return;
                let d = Math.hypot(b.x - target.x, b.y - target.y);
                
                if (d < viewRange) {
                    if (target.r > b.r * bravery) { 
                        if (d < minDistThreat) { closestThreat = target; minDistThreat = d; }
                    } 
                    else if (target.r < b.r * greed) { 
                        if (d < minDistPrey) { closestPrey = target; minDistPrey = d; }
                    }
                }
            };

            if (gameRunning) checkTarget(player);
            for (let i = 0; i < bots.length; i++) checkTarget(bots[i]);

            let targetAngle = b.angle;

            if (closestThreat) {
                b.state = 'flee';
                targetAngle = Math.atan2(b.y - closestThreat.y, b.x - closestThreat.x);
                b.changeDirTimer = 10;
            } else if (closestPrey) {
                b.state = 'chase';
                targetAngle = Math.atan2(closestPrey.y - b.y, closestPrey.x - b.x);
                b.changeDirTimer = 20;
            } else {
                b.state = 'wander';
                if (b.changeDirTimer <= 0) {
                    b.changeDirTimer = Math.random() * 100 + 50; 
                    b.angle += (Math.random() - 0.5) * 1.0; 
                }
                targetAngle = b.angle;
            }

            // Wall Avoidance (Soft Steering + Bounce Away)
            const margin = 300;
            if (b.x < margin || b.x > MAP_SIZE - margin || b.y < margin || b.y > MAP_SIZE - margin) {
                let centerAngle = Math.atan2(MAP_SIZE/2 - b.y, MAP_SIZE/2 - b.x);
                let diff = centerAngle - b.angle;
                while (diff <= -Math.PI) diff += Math.PI * 2;
                while (diff > Math.PI) diff -= Math.PI * 2;
                b.angle += diff * 0.05; 
            } else {
                b.angle = targetAngle;
            }
        }

        // Main Loop
        function loop() {
            if(!gameRunning) return;

            ctx.fillStyle = '#f0f2f5';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            let zoom = Math.max(0.4, 50 / (player.r + 50)); 
            ctx.save();
            ctx.translate(canvas.width/2, canvas.height/2);
            ctx.scale(zoom, zoom);
            ctx.translate(-player.x, -player.y);

            ctx.strokeStyle = '#dfe6e9'; ctx.lineWidth = 2; ctx.beginPath();
            for(let x=0; x<=MAP_SIZE; x+=100) { ctx.moveTo(x,0); ctx.lineTo(x,MAP_SIZE); }
            for(let y=0; y<=MAP_SIZE; y+=100) { ctx.moveTo(0,y); ctx.lineTo(MAP_SIZE,y); }
            ctx.stroke();
            ctx.strokeStyle = '#ff7675'; ctx.lineWidth = 10; ctx.strokeRect(0, 0, MAP_SIZE, MAP_SIZE);

            for(let i = foods.length - 1; i >= 0; i--) {
                let f = foods[i];
                if(Math.abs(f.x - player.x) > (canvas.width/zoom + 50) || Math.abs(f.y - player.y) > (canvas.height/zoom + 50)) continue;
                drawCircle(f.x, f.y, f.r, f.color);
                
                if((player.x-f.x)**2 + (player.y-f.y)**2 < (player.r - f.r/2)**2) { 
                    player.r += 0.2; foods.splice(i, 1); addFood();
                }
            }

            for (let i = bots.length - 1; i >= 0; i--) {
                let b = bots[i];
                updateBotAI(b); 
                
                let bSpeed = 2 + (50 / b.r);
                b.x += Math.cos(b.angle) * bSpeed;
                b.y += Math.sin(b.angle) * bSpeed;
                b.x = Math.max(0, Math.min(MAP_SIZE, b.x)); 
                b.y = Math.max(0, Math.min(MAP_SIZE, b.y));

                if(Math.abs(b.x - player.x) < (canvas.width/zoom + b.r + 50) && 
                   Math.abs(b.y - player.y) < (canvas.height/zoom + b.r + 50)) {
                    drawCircle(b.x, b.y, b.r, b.color);
                    ctx.fillStyle = 'white'; 
                    ctx.font = `bold ${Math.max(10, b.r * 0.4)}px Noto Sans KR`;
                    ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; 
                    ctx.fillText(b.name, b.x, b.y);
                }

                let distP = Math.hypot(player.x - b.x, player.y - b.y);
                if (distP < player.r + b.r) { 
                    // Strict Eating (>1.01)
                    if (player.r > b.r * 1.01 && distP < player.r - b.r * 0.1) { 
                        player.r += b.r * 0.4;
                        bots.splice(i, 1); addBot();
                        showKillLog(`Yum! Ate ${b.name}!`);
                        continue; 
                    } 
                    else if (b.r > player.r * 1.01 && distP < b.r - player.r * 0.1) {
                        gameOver(b.name);
                    }
                    else {
                        let angle = Math.atan2(b.y - player.y, b.x - player.x);
                        let overlap = (player.r + b.r) - distP;
                        b.x += Math.cos(angle) * (overlap * 0.1); 
                        b.y += Math.sin(angle) * (overlap * 0.1);
                    }
                }

                let eaten = false;
                for (let j = bots.length - 1; j >= 0; j--) {
                    if (i === j) continue;
                    let other = bots[j];
                    let dist = Math.hypot(b.x - other.x, b.y - other.y);

                    if (dist < b.r + other.r) {
                        if (b.r > other.r * 1.01 && dist < b.r - other.r * 0.1) {
                            b.r += other.r * 0.4;
                            bots.splice(j, 1); addBot();
                            if (j < i) i--; 
                        }
                        else if (other.r > b.r * 1.01 && dist < other.r - b.r * 0.1) {
                            other.r += b.r * 0.4;
                            bots.splice(i, 1); addBot();
                            eaten = true;
                            break; 
                        }
                        else {
                            let angle = Math.atan2(b.y - other.y, b.x - other.x);
                            let overlap = (b.r + other.r) - dist;
                            let push = overlap * 0.05;
                            b.x += Math.cos(angle) * push;
                            b.y += Math.sin(angle) * push;
                            other.x -= Math.cos(angle) * push;
                            other.y -= Math.sin(angle) * push;
                        }
                    }
                }
                if (eaten) continue;
            }

            let moveX = 0, moveY = 0;
            if (inputType === 'joystick') {
                moveX = joystickVector.x; moveY = joystickVector.y;
            } else {
                let dx = mouseX - canvas.width / 2;
                let dy = mouseY - canvas.height / 2;
                let angle = Math.atan2(dy, dx);
                let dist = Math.sqrt(dx*dx + dy*dy);
                if(dist > 10) { moveX = Math.cos(angle); moveY = Math.sin(angle); }
            }

            let pSpeed = 2.5 + (50 / player.r);
            player.x += moveX * pSpeed; 
            player.y += moveY * pSpeed;
            player.x = Math.max(0, Math.min(MAP_SIZE, player.x)); 
            player.y = Math.max(0, Math.min(MAP_SIZE, player.y));

            drawCircle(player.x, player.y, player.r, player.color);
            ctx.fillStyle = 'white'; 
            ctx.font = `bold ${Math.max(12, player.r * 0.4)}px Noto Sans KR`;
            ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; 
            ctx.fillText("Me", player.x, player.y);

            ctx.restore(); 
            updateLeaderboard();
            animationFrameId = requestAnimationFrame(loop);
        }

        function drawCircle(x, y, r, color) {
            ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2);
            ctx.fillStyle = color; ctx.fill();
            ctx.strokeStyle = 'rgba(0,0,0,0.1)'; ctx.lineWidth = 2; ctx.stroke();
        }

        function showKillLog(msg) {
            killLog.innerText = msg; killLog.style.opacity = 1;
            setTimeout(() => { killLog.style.opacity = 0; }, 2000);
        }

        function updateLeaderboard() {
            let all = [...bots, player].sort((a,b) => b.r - a.r);
            let html = '';
            for(let i=0; i<5; i++) {
                if(!all[i]) break;
                let name = all[i].name === 'Me (Player)' ? '<span style="color:#fd79a8">Me</span>' : all[i].name;
                html += `<li>${i+1}. ${name} <small>(${Math.floor(all[i].r)})</small></li>`;
            }
            rankList.innerHTML = html;
        }

        function gameOver(killer) {
            gameRunning = false;
            cancelAnimationFrame(animationFrameId);
            uiLayer.style.display = 'flex';
            document.getElementById('ui-title').innerText = "üíÄ Game Over";
            document.getElementById('ui-desc').innerHTML = `Eaten by <strong style="color:#ff7675">${killer}</strong><br>Final Size: ${Math.floor(player.r)}`;
            startBtn.innerText = "Try Again ‚Ü∫";
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const toast = document.getElementById("toast");
                toast.className = "show";
                setTimeout(() => toast.className = toast.className.replace("show", ""), 3000);
            });
        }

        init();
    </script>
</body>
</html>
